@{
	ViewData["Title"] = "Home Page";
	ViewData["PageName"] = "Home";
}

<div class="row p-3">
	<div class="card mb-4 ">
		<div class="d-flex">
			<div class="icon icon-shape icon-lg bg-gradient-success shadow text-center border-radius-xl mt-n3 ms-4">
				<i class="material-icons opacity-10" aria-hidden="true">language</i>
			</div>
			<h6 class="mt-3 mb-2 ms-3 ">Servers by Country</h6>
		</div>
		<div class="card-body p-3">
			<div class="row">
				<div class="col-lg-6 col-md-7">
					<div class="table-responsive">
						<table class="table align-items-center ">
							<tbody>
								<tr>
									<td class="w-30">
										<div class="d-flex px-2 py-1 align-items-center">
											<div>
												<img src="~/img/icons/flags/US.png" alt="Country flag">
											</div>
											<div class="ms-4">
												<p class="text-xs font-weight-bold mb-0 ">Country:</p>
												<h6 class="text-sm font-weight-normal mb-0 ">United States</h6>
											</div>
										</div>
									</td>
									<td>
										<div class="text-center">
											<p class="text-xs font-weight-bold mb-0 ">Number:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">25</h6>
										</div>
									</td>
									<td>
										<div class="text-center">
											<p class="text-xs font-weight-bold mb-0 ">User:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">230,900</h6>
										</div>
									</td>
									<td class="align-middle text-sm">
										<div class="col text-center">
											<p class="text-xs font-weight-bold mb-0 ">Resource Usage:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">29.9%</h6>
										</div>
									</td>
								</tr>
								<tr>
									<td class="w-30">
										<div class="d-flex px-2 py-1 align-items-center">
											<div>
												<img src="~/img/icons/flags/DE.png" alt="Country flag">
											</div>
											<div class="ms-4">
												<p class="text-xs font-weight-bold mb-0 ">Country:</p>
												<h6 class="text-sm font-weight-normal mb-0 ">Germany</h6>
											</div>
										</div>
									</td>
									<td>
										<div class="text-center">
											<p class="text-xs font-weight-bold mb-0 ">Number:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">390</h6>
										</div>
									</td>
									<td>
										<div class="text-center">
											<p class="text-xs font-weight-bold mb-0 ">User:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">40,000</h6>
										</div>
									</td>
									<td class="align-middle text-sm">
										<div class="col text-center">
											<p class="text-xs font-weight-bold mb-0 ">Resource Usage:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">40.22%</h6>
										</div>
									</td>
								</tr>
								<tr>
									<td class="w-30">
										<div class="d-flex px-2 py-1 align-items-center">
											<div>
												<img src="~/img/icons/flags/GB.png" alt="Country flag">
											</div>
											<div class="ms-4">
												<p class="text-xs font-weight-bold mb-0 ">Country:</p>
												<h6 class="text-sm font-weight-normal mb-0 ">Great Britain</h6>
											</div>
										</div>
									</td>
									<td>
										<div class="text-center">
											<p class="text-xs font-weight-bold mb-0 ">Number:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">10</h6>
										</div>
									</td>
									<td>
										<div class="text-center">
											<p class="text-xs font-weight-bold mb-0 ">User:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">190,700</h6>
										</div>
									</td>
									<td class="align-middle text-sm">
										<div class="col text-center">
											<p class="text-xs font-weight-bold mb-0 ">Resource Usage:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">23.44%</h6>
										</div>
									</td>
								</tr>
								<tr>
									<td class="w-30">
										<div class="d-flex px-2 py-1 align-items-center">
											<div>
												<img src="~/img/icons/flags/BR.png" alt="Country flag">
											</div>
											<div class="ms-4">
												<p class="text-xs font-weight-bold mb-0 ">Country:</p>
												<h6 class="text-sm font-weight-normal mb-0 ">Brasil</h6>
											</div>
										</div>
									</td>
									<td>
										<div class="text-center">
											<p class="text-xs font-weight-bold mb-0 ">Number:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">5</h6>
										</div>
									</td>
									<td>
										<div class="text-center">
											<p class="text-xs font-weight-bold mb-0 ">User:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">14,960</h6>
										</div>
									</td>
									<td class="align-middle text-sm">
										<div class="col text-center">
											<p class="text-xs font-weight-bold mb-0 ">Resource Usage:</p>
											<h6 class="text-sm font-weight-normal mb-0 ">32.14%</h6>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-lg-6 col-md-5">
					<div id="map" class="mt-0 mt-lg-n4"></div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-3 col-md-6 col-sm-6">
		<div class="card  mb-2">
			<div class="card-header p-3 pt-2">
				<div class="icon icon-lg icon-shape bg-gradient-dark shadow-dark shadow text-center border-radius-xl mt-n4 position-absolute">
					<i class="material-icons opacity-10">weekend</i>
				</div>
				<div class="text-end pt-1">
					<p class="text-sm mb-0 text-capitalize">Total Servers</p>
					<h4 class="mb-0">520</h4>
				</div>
			</div>
			<hr class="dark horizontal my-0">
			<div class="card-footer p-3">
				<p class="mb-0"><span class="text-success text-sm font-weight-bolder">+55% </span>than last week</p>
			</div>
		</div>
	</div>
	<div class="col-lg-3 col-md-6 col-sm-6 mt-sm-0 mt-4">
		<div class="card  mb-2">
			<div class="card-header p-3 pt-2">
				<div class="icon icon-lg icon-shape bg-gradient-primary shadow-primary shadow text-center border-radius-xl mt-n4 position-absolute">
					<i class="material-icons opacity-10">leaderboard</i>
				</div>
				<div class="text-end pt-1">
					<p class="text-sm mb-0 text-capitalize">Today's Users</p>
					<h4 class="mb-0">2,300</h4>
				</div>
			</div>
			<hr class="dark horizontal my-0">
			<div class="card-footer p-3">
				<p class="mb-0"><span class="text-success text-sm font-weight-bolder">+3% </span>than last month</p>
			</div>
		</div>
	</div>
	<div class="col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4">
		<div class="card  mb-2">
			<div class="card-header p-3 pt-2 bg-transparent">
				<div class="icon icon-lg icon-shape bg-gradient-success shadow-success text-center border-radius-xl mt-n4 position-absolute">
					<i class="material-icons opacity-10">store</i>
				</div>
				<div class="text-end pt-1">
					<p class="text-sm mb-0 text-capitalize ">Traffics</p>
					<h4 class="mb-0 ">34T</h4>
				</div>
			</div>
			<hr class="horizontal my-0 dark">
			<div class="card-footer p-3">
				<p class="mb-0 "><span class="text-success text-sm font-weight-bolder">+1% </span>than yesterday</p>
			</div>
		</div>
	</div>
	<div class="col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4">
		<div class="card ">
			<div class="card-header p-3 pt-2 bg-transparent">
				<div class="icon icon-lg icon-shape bg-gradient-info shadow-info text-center border-radius-xl mt-n4 position-absolute">
					<i class="material-icons opacity-10">person_add</i>
				</div>
				<div class="text-end pt-1">
					<p class="text-sm mb-0 text-capitalize ">Followers</p>
					<h4 class="mb-0 ">+91</h4>
				</div>
			</div>
			<hr class="horizontal my-0 dark">
			<div class="card-footer p-3">
				<p class="mb-0 ">Just updated</p>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-md-6 col-12 mt-4">
		<div class="card mb-4">
			<div class="card-header pb-0">
				<h6>System Information</h6>
			</div>
			<div class="card-body px-0 pt-0 pb-2">
				<div class="table-responsive p-0">
					<table class="table align-items-center mb-0">
						<thead>
							<tr>
								<th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Parameter</th>
								<th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Value</th>
								<th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
									Details
								</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="p-3">
									<p class="text-sm font-weight-normal mb-0">Server is running</p>
								</td>
								<td>
									<p class="text-sm font-weight-normal mb-0 text-success">yes</p>
								</td>
								<td class="align-middle text-center text-sm">
									<p class="text-sm font-weight-normal mb-0">localhost:8080</p>
								</td>

							</tr>
							<tr>
								<td class="p-3">
									<p class="text-sm font-weight-normal mb-0">Number of hosts (enabled/disabled/templates)</p>
								</td>
								<td>
									<p class="text-sm font-weight-normal mb-0">83</p>
								</td>
								<td class="align-middle text-center text-sm">
									<p class="text-sm font-weight-normal mb-0 text-success">2/0/81</p>
								</td>

							</tr>
							<tr>
								<td class="p-3">
									<p class="text-sm font-weight-normal mb-0">Number of items (enabled/disabled/not supported)</p>
								</td>
								<td>
									<p class="text-sm font-weight-normal mb-0">120</p>
								</td>
								<td class="align-middle text-center text-sm">
									<p class="text-sm font-weight-normal mb-0 text-danger">114/0/6</p>
								</td>

							</tr>
							<tr>
								<td class="p-3">
									<p class="text-sm font-weight-normal mb-0">Number of triggers (enabled/disabled [problem/ok])</p>
								</td>
								<td>
									<p class="text-sm font-weight-normal mb-0">65</p>
								</td>
								<td class="align-middle text-center text-sm">
									<p class="text-sm font-weight-normal mb-0 text-success">65/02/63</p>
								</td>

							</tr>
							<tr>
								<td class="p-3">
									<p class="text-sm font-weight-normal mb-0">Number of users (online)</p>
								</td>
								<td>
									<p class="text-sm font-weight-normal mb-0">2</p>
								</td>
								<td class="align-middle text-center text-sm">
									<p class="text-sm font-weight-normal mb-0">1</p>
								</td>

							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

	<div class="col-md-6 col-12 mt-5">
		<div class="card z-index-2">
			<div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent">
				<div class="bg-gradient-warning shadow-warning border-radius-lg py-3 pe-1">
					<div class="chart" id="chart-line-parent">
						<canvas id="chart-line" class="chart-canvas" height="170"></canvas>
					</div>
				</div>
			</div>
			<div class="card-body">
				<h6 class="mb-4 ">Average Processors Load Graph </h6>
				<p class="text-sm "> (<span class="font-weight-bolder">+15%</span>) increase than yesterday. </p>
				<hr class="dark horizontal">
				<div class="d-flex ">
					<i class="material-icons text-sm my-auto me-1">schedule</i>
					<p class="mb-0 text-sm"> updated 4 min ago </p>
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts{
	<script>
		let cpuUsageMap = (labelInput,dataInput) => {
			let ctx2 = document.getElementById("chart-line").getContext("2d");
			new Chart(ctx2, {
				type: "line",
				data: {
					labels: labelInput,
					datasets: [{
						label: "Processor Load",
						tension: 0,
						borderWidth: 0,
						pointRadius: 5,
						pointBackgroundColor: "rgba(255, 255, 255, .8)",
						pointBorderColor: "transparent",
						borderColor: "rgba(255, 255, 255, .8)",
						borderColor: "rgba(255, 255, 255, .8)",
						borderWidth: 4,
						backgroundColor: "transparent",
						fill: true,
						data: dataInput,
						maxBarThickness: 6

					}],
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					plugins: {
						legend: {
							display: false,
						}
					},
					interaction: {
						intersect: false,
						mode: 'index',
					},
					scales: {
						y: {
							grid: {
								drawBorder: false,
								display: true,
								drawOnChartArea: true,
								drawTicks: false,
								borderDash: [5, 5],
								color: 'rgba(255, 255, 255, .2)'
							},
							ticks: {
								display: true,
								color: '#f8f9fa',
								padding: 10,
								font: {
									size: 14,
									weight: 300,
									family: "Roboto",
									style: 'normal',
									lineHeight: 1
								},
							}
						},
						x: {
							grid: {
								drawBorder: false,
								display: false,
								drawOnChartArea: false,
								drawTicks: false,
								borderDash: [5, 5]
							},
							ticks: {
								display: true,
								color: '#f8f9fa',
								padding: 10,
								font: {
									size: 14,
									weight: 300,
									family: "Roboto",
									style: 'normal',
									lineHeight: 1
								},
							}
						},
					},
				},
			});
		}
		// Initialize the vector map
		var map = new jsVectorMap({
			selector: "#map",
			map: "world_merc",
			zoomOnScroll: false,
			zoomButtons: false,
			selectedMarkers: [1, 3],
			markersSelectable: true,
			markers: [{
				name: "USA",
				coords: [40.71296415909766, -74.00437720027804]
			},
			{
				name: "Germany",
				coords: [51.17661451970939, 10.97947735117339]
			},
			{
				name: "Brazil",
				coords: [-7.596735421549542, -54.781694323779185]
			},
			{
				name: "Russia",
				coords: [62.318222797104276, 89.81564777631716]
			},
			{
				name: "China",
				coords: [22.320178999475512, 114.17161225541399],
				style: {
					fill: '#E91E63'
				}
			}
			],
			markerStyle: {
				initial: {
					fill: "#e91e63"
				},
				hover: {
					fill: "E91E63"
				},
				selected: {
					fill: "E91E63"
				}
			},


		});

	</script>

	<script>
		$(document).ready(()=>{
			setInterval(()=>{
				$.ajax({
					url: "/api/GetCpuUsage",
					success: (result) => {
						let labels = [];
						let datas = [];
						result.forEach((x)=>{
							labels.push(x.sDate);
							datas.push(x.percent);
						});

						$('#chart-line').remove();
						$('#chart-line-parent').append('<canvas id="chart-line" class="chart-canvas" height="170"></canvas>');

						cpuUsageMap(labels,datas);
					},
				});
			},2000);
		});
	</script>

}